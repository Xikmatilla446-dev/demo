"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[586],{3006:function(e,n,r){r.d(n,{A:function(){return o}});var t=r(1413),a=r(2917),l=r(1264),i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.a)((0,t.Z)({queryKey:[e,n],queryFn:function(){return l.W.get(e,{params:n}).then((function(e){return e}))}},r))},o=function(){return i("/api/v1/documents")}},9586:function(e,n,r){r.r(n),r.d(n,{default:function(){return P}});var t=r(1413),a=r(2791),l=r(1134),i=r(1724),o=r(4165),s=r(4942),u=r(5861),c=function(e){return(0,a.useCallback)(function(){var n=(0,u.Z)((0,o.Z)().mark((function n(r){var a,l;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.validate(r,{abortEarly:!1});case 3:return a=n.sent,n.abrupt("return",{values:a,errors:{}});case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",{values:{},errors:null===n.t0||void 0===n.t0||null===(l=n.t0.inner)||void 0===l?void 0:l.reduce((function(e,n){var r;return(0,t.Z)((0,t.Z)({},e),{},(0,s.Z)({},n.path,{type:null!==(r=n.type)&&void 0!==r?r:"validation",message:n.message}))}),{})});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),[e])},d="MainForm_form_page__KE8ev",f="MainForm_form_box__VpmiL",m="MainForm_form__Fmmh7",v=r(8686),_=r(9603),p=r(7128),h=r(2014),x=r(3649),y=r(4925),Z=r(4219),j="Input_input__H5xrG",g="Input_label__S0pty",b=r(1694),S=r.n(b),C=r(184),q=["label","size","className","errorMsg"],A=function(e){var n=e.label,r=e.size,a=void 0===r?"large":r,l=e.className,i=e.errorMsg,o=(0,y.Z)(e,q),s=S()(j,l&&l,i&&"ant-form-item-has-error");return(0,C.jsxs)("div",{className:s,children:[(0,C.jsx)("span",{className:g,children:n}),(0,C.jsx)(Z.Z,(0,t.Z)({size:a},o))]})},z="Select_select__l-Wqe",k="Select_label__CkLjz",F=r(9969),w=["label","size","fullWidth"],E=function(e){var n=e.label,r=e.size,a=void 0===r?"large":r,l=e.fullWidth,i=(0,y.Z)(e,w),o=S()(z,l&&"w100");return(0,C.jsxs)("div",{className:o,children:[(0,C.jsx)("span",{className:k,children:n}),(0,C.jsx)(F.Z,(0,t.Z)({size:a},i))]})},N=r(6181),T=r.n(N),R=r(3006),M=r(3418),W=r(1264),D=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,M.D)((function(r){return(0,W.W)({method:n,url:e,data:r})}),(0,t.Z)({},r))},I=r(7689),P=function(){var e=(0,R.A)(),n=D("/api/v1/documents/create","post",{}),r=(0,I.s0)(),o=(0,a.useMemo)((function(){return(0,i.Ry)({document_name:(0,i.Z_)().required("not empty"),form_values:(0,i.IX)().of((0,i.Ry)().shape({field_seq:(0,i.Z_)().required("not empty"),is_mandatory:(0,i.Rx)().required("not empty"),field_type:(0,i.Rx)(),field_name:(0,i.Z_)()}))})}),[]),s=c(o),u=(0,l.cI)({defaultValues:{document_name:void 0,form_values:[{field_seq:void 0,is_mandatory:void 0,field_type:void 0,field_name:void 0,select_values:void 0,document_id:void 0}]},resolver:s}),y=u.control,Z=u.handleSubmit,j=u.setValue,g=(u.getValues,u.reset,u.watch),b=u.formState.errors,S=(0,l.Dq)({name:"form_values",control:y}),q=(0,a.useMemo)((function(){return(Array.isArray(T()(e,"data.data",[]))?T()(e,"data.data",[]):[]).map((function(e){return{label:e.document_name,value:e.id}}))}),[e.isSuccess]),z=Z((function(e){var a=(0,t.Z)((0,t.Z)({},e),{},{form_values:T()(e,"form_values",[]).map((function(e){return{field_seq:e.field_seq,is_mandatory:e.is_mandatory,field_type:e.field_type,field_name:null!==e&&void 0!==e&&e.field_name?null===e||void 0===e?void 0:e.field_name:"",document_id:null!==e&&void 0!==e&&e.document_id?null===e||void 0===e?void 0:e.document_id:"",select_values:null!==e&&void 0!==e&&e.select_values?null===e||void 0===e?void 0:e.select_values:""}}))});n.mutateAsync(a).then((function(e){r("/")})).catch((function(e){console.log(e)}))}));return(0,C.jsx)("div",{className:d,children:(0,C.jsx)("div",{className:f,children:(0,C.jsxs)(v.Z,{gutter:[20,20],justify:"center",children:[(0,C.jsx)(_.Z,{span:24,children:(0,C.jsx)(l.Qr,{name:"document_name",control:y,render:function(e){var n=e.field;e.fieldState;return(0,C.jsx)(A,(0,t.Z)({size:"large",label:"Document title"},n))}})}),(0,C.jsx)(p.Z,{style:{marginBottom:"30px",marginTop:"15px",borderTop:"1px solid #364BA8"}}),S.fields.map((function(n,r){return(0,C.jsxs)(v.Z,{gutter:[20,40],className:m,children:[(0,C.jsx)(_.Z,{xs:24,children:(0,C.jsx)(l.Qr,{name:"form_values.".concat(r,".field_seq"),control:y,render:function(e){var n=e.field;e.fieldState;return(0,C.jsx)(A,(0,t.Z)({label:"Field sequence (weight)",type:"number",size:"large",errorMsg:T()(b,"form_values[".concat(r,"].field_seq"),{})},n))}})}),(0,C.jsx)(_.Z,{xs:24,children:(0,C.jsx)(l.Qr,{name:"form_values.".concat(r,".field_type"),control:y,render:function(e){var a=e.field,l=a.value,i=a.onChange;e.fieldState;return(0,C.jsx)(E,(0,t.Z)((0,t.Z)({label:"Field type",size:"large"},n),{},{style:{width:"100%"},options:[{label:"Input",value:1},{label:"Select",value:2},{label:"NumberInput",value:3}],value:l,onChange:function(e){i(e),j("form_values.".concat(r,".select_values"),void 0),j("form_values.".concat(r,".field_name"),void 0),j("form_values.".concat(r,".document_id"),void 0)}}))}})}),(0,C.jsx)(_.Z,{xs:24,children:2===g("form_values.".concat(r,".field_type"))?(0,C.jsx)(l.Qr,{name:"form_values.".concat(r,".select_values"),control:y,render:function(e){var n=e.field;e.fieldState;return(0,C.jsx)(E,(0,t.Z)((0,t.Z)({label:"Field name",size:"large"},n),{},{style:{width:"100%"},options:[{value:1,label:"Agree"},{value:0,label:"Disagree"}]}))}}):(0,C.jsx)(C.Fragment,{children:1===g("form_values.".concat(r,".field_type"))?(0,C.jsx)(l.Qr,{name:"form_values.".concat(r,".field_name"),control:y,render:function(e){var n=e.field;e.fieldState;return(0,C.jsx)(A,(0,t.Z)({label:"Field name",type:"number",size:"large",errorMsg:T()(b,"form_values[".concat(r,"].field_name"),{})},n))}}):(0,C.jsx)(l.Qr,{name:"form_values.".concat(r,".document_id"),control:y,render:function(n){var r=n.field;n.fieldState;return(0,C.jsx)(E,(0,t.Z)((0,t.Z)({label:"Field name",size:"large"},r),{},{style:{width:"100%"},options:q,loading:e.isLoading}))}})})}),(0,C.jsx)(_.Z,{xs:24,children:(0,C.jsx)(l.Qr,{name:"form_values.".concat(r,".is_mandatory"),control:y,render:function(e){var n=e.field,r=n.value,t=n.onChange;e.fieldState;return(0,C.jsx)(h.Z,{type:"number",checked:1===r,onClick:function(){t(1===r?0:1)},children:"\xa0Mandatory"})}})}),(0,C.jsx)(p.Z,{style:{marginBottom:"10px",marginTop:"0px",borderTop:"1px solid #364BA8"}})]},r)})),(0,C.jsxs)(v.Z,{style:{width:"100%"},justify:"space-between",children:[(0,C.jsx)(x.Z,{onClick:function(){return S.append({})},children:"Add more"}),(0,C.jsx)(x.Z,{type:"primary",onClick:z,children:"Save"})]})]})})})}},1264:function(e,n,r){r.d(n,{W:function(){return t}});var t=r(2388).Z.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_URL});!function(e){e.interceptors.request.use((function(e){return e.headers["API-KEY"]="secret-api-key",e.headers["Accept-Encoding"]="gzip,defiate,br",e.headers.Connection="keep-alive",e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return e}),(function(e){var n;return null===e||void 0===e||null===(n=e.response)||void 0===n||n.status,Promise.reject(e)}))}(t)}}]);
//# sourceMappingURL=586.6f45c1ef.chunk.js.map